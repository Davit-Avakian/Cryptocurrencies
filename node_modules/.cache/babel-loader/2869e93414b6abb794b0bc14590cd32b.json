{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\David\\\\Desktop\\\\react\\\\cryptocurrencies\\\\cryptocurrencies\\\\src\\\\index.js\";\nimport React from 'react';\nimport ReactDom from 'react-dom';\nimport './index.css';\nimport { Header, List, Details, NotFound, PopUp, AccountDetails } from './components';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport MyProfile from './components/accountDetails/MyProfile';\nimport MyPurchases from './components/accountDetails/MyPurchases';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.createAccountCheck = async (users, user) => {\n      this.setState({\n        error: false\n      }, () => {\n        users.forEach(us => {\n          if (us.email == user.email) {\n            this.setState({\n              error: true\n            });\n          }\n        });\n      });\n    };\n\n    this.createAccountSubmit = async user => {\n      const newUsers = JSON.parse(localStorage.getItem('users')) ? [...JSON.parse(localStorage.getItem('users'))] : [];\n      user.id = newUsers.length + 1;\n      user.purchases = [];\n      await this.createAccountCheck(newUsers, user);\n\n      if (this.state.error) {\n        return;\n      }\n\n      newUsers.push(user);\n      localStorage.setItem('users', JSON.stringify(newUsers));\n      this.setState({\n        openPopUp: false,\n        signedIn: true\n      });\n      this.currentUser = user;\n    };\n\n    this.openPopUp = type => {\n      this.setState({\n        error: false\n      });\n\n      if (type == 'create') {\n        this.setState({\n          openPopUp: true,\n          createAccount: true\n        });\n        return;\n      }\n\n      this.setState({\n        openPopUp: true\n      });\n    };\n\n    this.closePopUp = (e, ref) => {\n      console.log('insideClos');\n      e.stopPropagation();\n\n      if (ref || ref.current.contains(e.target)) {\n        return;\n      }\n\n      this.setState({\n        openPopUp: false,\n        createAccount: false\n      });\n    };\n\n    this.submitSignInCheck = (users, user) => {\n      this.setState({\n        error: true\n      }, () => {\n        if (!users) {\n          return;\n        }\n\n        users.forEach(us => {\n          if (us.email == user.email && us.password == user.password) {\n            this.currentUser = us;\n            this.setState({\n              error: false\n            });\n            return;\n          }\n        });\n      });\n    };\n\n    this.submitSignIn = async user => {\n      const newUsers = JSON.parse(localStorage.getItem('users'));\n      await this.submitSignInCheck(newUsers, user);\n\n      if (this.state.error) {\n        return;\n      }\n\n      this.setState({\n        openPopUp: false,\n        signedIn: true\n      });\n    };\n\n    this.openAccountDetails = e => {\n      e.stopPropagation();\n      this.setState({\n        accountDetails: true\n      });\n    };\n\n    this.closeDetails = (e, ref) => {\n      if (ref && ref.current.contains(e.target)) {\n        return;\n      }\n\n      this.setState({\n        accountDetails: false\n      });\n    };\n\n    this.logout = () => {\n      this.setState({\n        signedIn: false,\n        accountDetails: false,\n        purchases: []\n      });\n    };\n\n    this.setPurchases = (id, buy, name, count, price) => {\n      const users = JSON.parse(localStorage.getItem('users'));\n      const purchase = {\n        id,\n        type: buy ? 'buy' : 'sell',\n        name,\n        count,\n        price: price * count\n      };\n      const newUsers = users.map(user => {\n        if (user.id == this.currentUser.id) {\n          user.purchase = user.purchases ? user.purchases.push(purchase) : [purchase];\n          this.currentUser = user;\n        }\n\n        return user;\n      });\n      this.setState({\n        users: newUsers\n      }, () => {\n        localStorage.setItem('users', JSON.stringify(newUsers));\n      });\n    };\n\n    this.currentUser = {};\n    this.state = {\n      openPopUp: false,\n      createAccount: false,\n      signedIn: this.currentUser.signedIn,\n      accountDetails: false,\n      error: false,\n      purchases: [],\n      users: JSON.parse(localStorage.getItem('users')) || []\n    };\n  }\n\n  render() {\n    const {\n      openPopUp,\n      signedIn,\n      createAccount,\n      error,\n      accountDetails,\n      users,\n      purchases\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          openPopUp: this.openPopUp,\n          signedIn: signedIn,\n          openAccountDetails: this.openAccountDetails\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), openPopUp ? /*#__PURE__*/_jsxDEV(PopUp, {\n          closePopUp: this.closePopUp,\n          createAccountSubmit: this.createAccountSubmit,\n          createAccount: createAccount,\n          submitSignIn: this.submitSignIn,\n          error: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 24\n        }, this) : null, accountDetails ? /*#__PURE__*/_jsxDEV(AccountDetails, {\n          closeDetails: this.closeDetails,\n          logout: this.logout,\n          id: this.currentUser.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 29\n        }, this) : null, /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: '/',\n            element: /*#__PURE__*/_jsxDEV(List, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 40\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: '/currency/:id',\n            element: /*#__PURE__*/_jsxDEV(Details, {\n              signedIn: signedIn,\n              setPurchases: this.setPurchases\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 53\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: '/myprofile/:id',\n            element: /*#__PURE__*/_jsxDEV(MyProfile, {\n              users: users\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 53\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: '/mypurchases/:id',\n            element: /*#__PURE__*/_jsxDEV(MyPurchases, {\n              users: users,\n              currentUser: this.currentUser\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 55\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            element: /*#__PURE__*/_jsxDEV(NotFound, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 38\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nReactDom.render( /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 179,\n  columnNumber: 4\n}, this), document.getElementById('root'));","map":{"version":3,"sources":["C:/Users/David/Desktop/react/cryptocurrencies/cryptocurrencies/src/index.js"],"names":["React","ReactDom","Header","List","Details","NotFound","PopUp","AccountDetails","BrowserRouter","Routes","Route","MyProfile","MyPurchases","App","Component","constructor","createAccountCheck","users","user","setState","error","forEach","us","email","createAccountSubmit","newUsers","JSON","parse","localStorage","getItem","id","length","purchases","state","push","setItem","stringify","openPopUp","signedIn","currentUser","type","createAccount","closePopUp","e","ref","console","log","stopPropagation","current","contains","target","submitSignInCheck","password","submitSignIn","openAccountDetails","accountDetails","closeDetails","logout","setPurchases","buy","name","count","price","purchase","map","render","document","getElementById"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,aAAP;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,OAAvB,EAAgCC,QAAhC,EAA0CC,KAA1C,EAAiDC,cAAjD,QAAuE,cAAvE;AACA,SAASC,aAAT,EAAwBC,MAAxB,EAAgCC,KAAhC,QAA6C,kBAA7C;AACA,OAAOC,SAAP,MAAsB,uCAAtB;AACA,OAAOC,WAAP,MAAwB,yCAAxB;;;AAGA,MAAMC,GAAN,SAAkBb,KAAK,CAACc,SAAxB,CAAiC;AAC/BC,EAAAA,WAAW,GAAG;AACZ;;AADY,SAkBdC,kBAlBc,GAkBO,OAAMC,KAAN,EAAaC,IAAb,KAAsB;AACzC,WAAKC,QAAL,CAAc;AAACC,QAAAA,KAAK,EAAE;AAAR,OAAd,EAA8B,MAAM;AAClCH,QAAAA,KAAK,CAACI,OAAN,CAAcC,EAAE,IAAI;AACpB,cAAGA,EAAE,CAACC,KAAH,IAAYL,IAAI,CAACK,KAApB,EAA2B;AACzB,iBAAKJ,QAAL,CAAc;AAACC,cAAAA,KAAK,EAAG;AAAT,aAAd;AACD;AACF,SAJC;AAKD,OAND;AAQD,KA3Ba;;AAAA,SA6BdI,mBA7Bc,GA6BQ,MAAMN,IAAN,IAAe;AACnC,YAAMO,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,IAA4C,CAAC,GAAGH,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAJ,CAA5C,GAA6F,EAA9G;AACAX,MAAAA,IAAI,CAACY,EAAL,GAAUL,QAAQ,CAACM,MAAT,GAAgB,CAA1B;AACAb,MAAAA,IAAI,CAACc,SAAL,GAAiB,EAAjB;AACA,YAAM,KAAKhB,kBAAL,CAAwBS,QAAxB,EAAkCP,IAAlC,CAAN;;AAEA,UAAG,KAAKe,KAAL,CAAWb,KAAd,EAAqB;AACnB;AACD;;AACDK,MAAAA,QAAQ,CAACS,IAAT,CAAchB,IAAd;AACAU,MAAAA,YAAY,CAACO,OAAb,CAAqB,OAArB,EAA8BT,IAAI,CAACU,SAAL,CAAeX,QAAf,CAA9B;AAEE,WAAKN,QAAL,CAAc;AAACkB,QAAAA,SAAS,EAAE,KAAZ;AAAmBC,QAAAA,QAAQ,EAAE;AAA7B,OAAd;AACA,WAAKC,WAAL,GAAmBrB,IAAnB;AACD,KA3CW;;AAAA,SA8CdmB,SA9Cc,GA8CDG,IAAD,IAAU;AACpB,WAAKrB,QAAL,CAAc;AAACC,QAAAA,KAAK,EAAE;AAAR,OAAd;;AACA,UAAGoB,IAAI,IAAI,QAAX,EAAqB;AACnB,aAAKrB,QAAL,CAAc;AAACkB,UAAAA,SAAS,EAAE,IAAZ;AAAkBI,UAAAA,aAAa,EAAE;AAAjC,SAAd;AAEA;AACD;;AAED,WAAKtB,QAAL,CAAc;AAACkB,QAAAA,SAAS,EAAE;AAAZ,OAAd;AACD,KAvDa;;AAAA,SAyDdK,UAzDc,GAyDD,CAACC,CAAD,EAAGC,GAAH,KAAW;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAH,MAAAA,CAAC,CAACI,eAAF;;AAGA,UAAGH,GAAG,IAAIA,GAAG,CAACI,OAAJ,CAAYC,QAAZ,CAAqBN,CAAC,CAACO,MAAvB,CAAV,EAA0C;AACxC;AACD;;AACD,WAAK/B,QAAL,CAAc;AAACkB,QAAAA,SAAS,EAAE,KAAZ;AAAmBI,QAAAA,aAAa,EAAE;AAAlC,OAAd;AACD,KAlEa;;AAAA,SAoEdU,iBApEc,GAoEM,CAAClC,KAAD,EAAQC,IAAR,KAAiB;AACnC,WAAKC,QAAL,CAAc;AAACC,QAAAA,KAAK,EAAE;AAAR,OAAd,EAA6B,MAAM;AACjC,YAAG,CAACH,KAAJ,EAAW;AACX;AACD;;AACCA,QAAAA,KAAK,CAACI,OAAN,CAAcC,EAAE,IAAI;AAClB,cAAGA,EAAE,CAACC,KAAH,IAAYL,IAAI,CAACK,KAAjB,IAA0BD,EAAE,CAAC8B,QAAH,IAAelC,IAAI,CAACkC,QAAjD,EAA2D;AACzD,iBAAKb,WAAL,GAAmBjB,EAAnB;AACA,iBAAKH,QAAL,CAAc;AAACC,cAAAA,KAAK,EAAE;AAAR,aAAd;AAEA;AACD;AACJ,SAPC;AAQD,OAZD;AAcD,KAnFa;;AAAA,SAqFdiC,YArFc,GAqFC,MAAMnC,IAAN,IAAe;AAC5B,YAAMO,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAjB;AAEA,YAAM,KAAKsB,iBAAL,CAAuB1B,QAAvB,EAAgCP,IAAhC,CAAN;;AAEA,UAAG,KAAKe,KAAL,CAAWb,KAAd,EAAqB;AACnB;AACD;;AAED,WAAKD,QAAL,CAAc;AAACkB,QAAAA,SAAS,EAAE,KAAZ;AAAmBC,QAAAA,QAAQ,EAAE;AAA7B,OAAd;AACD,KA/Fa;;AAAA,SAiGdgB,kBAjGc,GAiGQX,CAAD,IAAO;AAC1BA,MAAAA,CAAC,CAACI,eAAF;AAEA,WAAK5B,QAAL,CAAc;AAACoC,QAAAA,cAAc,EAAE;AAAjB,OAAd;AACD,KArGa;;AAAA,SAuGdC,YAvGc,GAuGC,CAACb,CAAD,EAAGC,GAAH,KAAW;AACxB,UAAGA,GAAG,IAAIA,GAAG,CAACI,OAAJ,CAAYC,QAAZ,CAAqBN,CAAC,CAACO,MAAvB,CAAV,EAA0C;AACxC;AACD;;AAED,WAAK/B,QAAL,CAAc;AAACoC,QAAAA,cAAc,EAAE;AAAjB,OAAd;AACD,KA7Ga;;AAAA,SA+GdE,MA/Gc,GA+GL,MAAM;AACb,WAAKtC,QAAL,CAAc;AAACmB,QAAAA,QAAQ,EAAE,KAAX;AAAkBiB,QAAAA,cAAc,EAAE,KAAlC;AAAyCvB,QAAAA,SAAS,EAAE;AAApD,OAAd;AACD,KAjHa;;AAAA,SAmHhB0B,YAnHgB,GAmHD,CAAC5B,EAAD,EAAK6B,GAAL,EAAUC,IAAV,EAAgBC,KAAhB,EAAuBC,KAAvB,KAAiC;AAC5C,YAAM7C,KAAK,GAAGS,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAd;AAEA,YAAMkC,QAAQ,GAAG;AACfjC,QAAAA,EADe;AAEfU,QAAAA,IAAI,EAAEmB,GAAG,GAAG,KAAH,GAAW,MAFL;AAGfC,QAAAA,IAHe;AAIfC,QAAAA,KAJe;AAKfC,QAAAA,KAAK,EAAEA,KAAK,GAACD;AALE,OAAjB;AAUA,YAAMpC,QAAQ,GAAGR,KAAK,CAAC+C,GAAN,CAAU9C,IAAI,IAAI;AACjC,YAAGA,IAAI,CAACY,EAAL,IAAW,KAAKS,WAAL,CAAiBT,EAA/B,EAAmC;AACjCZ,UAAAA,IAAI,CAAC6C,QAAL,GAAgB7C,IAAI,CAACc,SAAL,GAAiBd,IAAI,CAACc,SAAL,CAAeE,IAAf,CAAoB6B,QAApB,CAAjB,GAAiD,CAACA,QAAD,CAAjE;AACA,eAAKxB,WAAL,GAAmBrB,IAAnB;AACD;;AACD,eAAOA,IAAP;AACD,OANgB,CAAjB;AAQA,WAAKC,QAAL,CAAc;AAACF,QAAAA,KAAK,EAAEQ;AAAR,OAAd,EAAiC,MAAM;AACrCG,QAAAA,YAAY,CAACO,OAAb,CAAqB,OAArB,EAA8BT,IAAI,CAACU,SAAL,CAAeX,QAAf,CAA9B;AACD,OAFD;AAKD,KA7Ia;;AAGZ,SAAKc,WAAL,GAAmB,EAAnB;AAIA,SAAKN,KAAL,GAAa;AACXI,MAAAA,SAAS,EAAE,KADA;AAEXI,MAAAA,aAAa,EAAE,KAFJ;AAGXH,MAAAA,QAAQ,EAAE,KAAKC,WAAL,CAAiBD,QAHhB;AAIXiB,MAAAA,cAAc,EAAE,KAJL;AAKXnC,MAAAA,KAAK,EAAE,KALI;AAMXY,MAAAA,SAAS,EAAE,EANA;AAOXf,MAAAA,KAAK,EAAES,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,KAA6C;AAPzC,KAAb;AASD;;AA+HDoC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAC5B,MAAAA,SAAD;AAAYC,MAAAA,QAAZ;AAAuBG,MAAAA,aAAvB;AAAsCrB,MAAAA,KAAtC;AAA6CmC,MAAAA,cAA7C;AAA6DtC,MAAAA,KAA7D;AAAoEe,MAAAA;AAApE,QAAiF,KAAKC,KAA5F;AAEE,wBACA,QAAC,aAAD;AAAA,6BACE;AAAA,gCACE,QAAC,MAAD;AAAQ,UAAA,SAAS,EAAE,KAAKI,SAAxB;AAAmC,UAAA,QAAQ,EAAEC,QAA7C;AAAuD,UAAA,kBAAkB,EAAE,KAAKgB;AAAhF;AAAA;AAAA;AAAA;AAAA,gBADF,EAEGjB,SAAS,gBAAG,QAAC,KAAD;AAAO,UAAA,UAAU,EAAE,KAAKK,UAAxB;AAAoC,UAAA,mBAAmB,EAAE,KAAKlB,mBAA9D;AAAmF,UAAA,aAAa,EAAEiB,aAAlG;AAAiH,UAAA,YAAY,EAAE,KAAKY,YAApI;AAAkJ,UAAA,KAAK,EAAEjC;AAAzJ;AAAA;AAAA;AAAA;AAAA,gBAAH,GAAuK,IAFnL,EAGGmC,cAAc,gBAAG,QAAC,cAAD;AAAgB,UAAA,YAAY,EAAE,KAAKC,YAAnC;AAAiD,UAAA,MAAM,EAAE,KAAKC,MAA9D;AAAsE,UAAA,EAAE,EAAE,KAAKlB,WAAL,CAAiBT;AAA3F;AAAA;AAAA;AAAA;AAAA,gBAAH,GAAsG,IAHvH,eAIE,QAAC,MAAD;AAAA,kCACE,QAAC,KAAD;AAAO,YAAA,IAAI,EAAE,GAAb;AAAkB,YAAA,OAAO,eAAE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAA3B;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,KAAD;AAAO,YAAA,IAAI,EAAE,eAAb;AAA8B,YAAA,OAAO,eAAG,QAAC,OAAD;AAAS,cAAA,QAAQ,EAAEQ,QAAnB;AAA6B,cAAA,YAAY,EAAE,KAAKoB;AAAhD;AAAA;AAAA;AAAA;AAAA;AAAxC;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE,QAAC,KAAD;AAAO,YAAA,IAAI,EAAE,gBAAb;AAA+B,YAAA,OAAO,eAAE,QAAC,SAAD;AAAW,cAAA,KAAK,EAAEzC;AAAlB;AAAA;AAAA;AAAA;AAAA;AAAxC;AAAA;AAAA;AAAA;AAAA,kBAHF,eAIE,QAAC,KAAD;AAAO,YAAA,IAAI,EAAE,kBAAb;AAAiC,YAAA,OAAO,eAAE,QAAC,WAAD;AAAa,cAAA,KAAK,EAAEA,KAApB;AAA2B,cAAA,WAAW,EAAE,KAAKsB;AAA7C;AAAA;AAAA;AAAA;AAAA;AAA1C;AAAA;AAAA;AAAA;AAAA,kBAJF,eAKE,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,GAAZ;AAAgB,YAAA,OAAO,eAAE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAzB;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADA;AAgBH;;AAnK8B;;AAwKjCtC,QAAQ,CAACgE,MAAT,eACG,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA,QADH,EAEEC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAFF","sourcesContent":["import React from 'react';\nimport ReactDom from 'react-dom';\nimport './index.css'\nimport { Header, List, Details, NotFound, PopUp, AccountDetails } from './components';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport MyProfile from './components/accountDetails/MyProfile';\nimport MyPurchases from './components/accountDetails/MyPurchases';\n\n\nclass App extends React.Component{\n  constructor() {\n    super();\n\n    this.currentUser = {\n\n    };\n\n    this.state = {\n      openPopUp: false,\n      createAccount: false,\n      signedIn: this.currentUser.signedIn,\n      accountDetails: false,\n      error: false,\n      purchases: [],\n      users: JSON.parse(localStorage.getItem('users')) || [],\n    }\n  }\n\n  createAccountCheck = async(users, user) => {\n    this.setState({error: false}, () => {\n      users.forEach(us => {\n      if(us.email == user.email) {\n        this.setState({error : true})\n      }\n    })\n    })\n    \n  }\n\n  createAccountSubmit = async(user) => {\n    const newUsers = JSON.parse(localStorage.getItem('users')) ? [...JSON.parse(localStorage.getItem('users'))] : [];\n    user.id = newUsers.length+1;\n    user.purchases = [];\n    await this.createAccountCheck(newUsers, user);\n\n    if(this.state.error) {\n      return\n    }\n    newUsers.push(user)\n    localStorage.setItem('users', JSON.stringify(newUsers))\n\n      this.setState({openPopUp: false, signedIn: true})\n      this.currentUser = user;\n    }\n  \n\n  openPopUp = (type) => {\n    this.setState({error: false})\n    if(type == 'create') {\n      this.setState({openPopUp: true, createAccount: true})\n\n      return;\n    }\n\n    this.setState({openPopUp: true})\n  }\n\n  closePopUp = (e,ref) => {\n    console.log('insideClos');\n    e.stopPropagation();\n\n    \n    if(ref || ref.current.contains(e.target)) {\n      return;\n    }\n    this.setState({openPopUp: false, createAccount: false})\n  }\n\n  submitSignInCheck = (users, user) => {\n    this.setState({error: true}, () => {\n      if(!users) {\n      return;\n    }\n      users.forEach(us => {\n        if(us.email == user.email && us.password == user.password) {\n          this.currentUser = us;\n          this.setState({error: false});\n\n          return\n        }\n    })\n    })\n    \n  }\n\n  submitSignIn = async(user) => {\n    const newUsers = JSON.parse(localStorage.getItem('users'));\n\n    await this.submitSignInCheck(newUsers,user);\n\n    if(this.state.error) {\n      return;\n    }\n\n    this.setState({openPopUp: false, signedIn: true})\n  }\n\n  openAccountDetails = (e) => {\n    e.stopPropagation();\n    \n    this.setState({accountDetails: true})\n  }\n\n  closeDetails = (e,ref) => {\n    if(ref && ref.current.contains(e.target)) {\n      return;\n    }\n\n    this.setState({accountDetails: false})\n  }\n\n  logout = () => {\n    this.setState({signedIn: false, accountDetails: false, purchases: []})\n  }\n\nsetPurchases = (id, buy, name, count, price) => {\n    const users = JSON.parse(localStorage.getItem('users'));\n\n    const purchase = {\n      id,\n      type: buy ? 'buy' : 'sell',\n      name,\n      count,\n      price: price*count,\n    }\n\n\n\n    const newUsers = users.map(user => {\n      if(user.id == this.currentUser.id) {\n        user.purchase = user.purchases ? user.purchases.push(purchase) : [purchase];\n        this.currentUser = user;\n      }\n      return user;\n    });\n\n    this.setState({users: newUsers}, () => {\n      localStorage.setItem('users', JSON.stringify(newUsers));\n    });\n\n    \n  }\n\n  render() {\n    const {openPopUp, signedIn , createAccount, error, accountDetails, users, purchases} = this.state;\n  \n      return (\n      <BrowserRouter>\n        <div>\n          <Header openPopUp={this.openPopUp} signedIn={signedIn} openAccountDetails={this.openAccountDetails}/>\n          {openPopUp ? <PopUp closePopUp={this.closePopUp} createAccountSubmit={this.createAccountSubmit} createAccount={createAccount} submitSignIn={this.submitSignIn} error={error}/> : null}\n          {accountDetails ? <AccountDetails closeDetails={this.closeDetails} logout={this.logout} id={this.currentUser.id}/> : null}\n          <Routes>\n            <Route path={'/'} element={<List />}/>\n            <Route path={'/currency/:id'} element={(<Details signedIn={signedIn} setPurchases={this.setPurchases}/>)}/>\n            <Route path={'/myprofile/:id'} element={<MyProfile users={users} />}/>\n            <Route path={'/mypurchases/:id'} element={<MyPurchases users={users} currentUser={this.currentUser}/>}/>\n            <Route path='*' element={<NotFound />} />\n          </Routes>\n        </div>\n      </BrowserRouter>\n    )\n  }\n  }\n  \n\n\nReactDom.render(\n   <App/>,\n  document.getElementById('root')\n)\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}