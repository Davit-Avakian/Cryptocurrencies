{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\David\\\\Desktop\\\\react\\\\cryptocurrencies\\\\cryptocurrencies\\\\src\\\\components\\\\List\\\\List.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { API_URL } from '../../configs';\nimport { query } from '../core/helpers/query';\nimport Loading from \"../common/Loading\";\nimport Pagination from \"./Pagination\";\nimport Table from \"./Table\";\nimport './Table.css';\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst List = props => {\n  _s();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [currencies, setCurrencies] = useState([]);\n  const [error, setError] = useState(null);\n  const [highToLow, setHighToLow] = useState(false);\n  const location = useLocation();\n  const navigate = useNavigate();\n  const totalPages = 5;\n  useEffect(() => {\n    const {\n      page\n    } = query(location.search);\n\n    if (!page) {\n      navigate({\n        pathname: '/',\n        search: `?page=1`\n      });\n    }\n\n    fetchCurrency(page || 1);\n  }, [location.search]);\n\n  const fetchCurrency = page => {\n    setIsLoading(true);\n    fetch(`${API_URL}&page=${page || 1}&per_page=20`).then(data => {\n      if (data.status === 200) {\n        return data.json();\n      }\n\n      throw Error();\n    }).then(currencies => {\n      setIsLoading(false);\n      setCurrencies(currencies);\n    }).catch(error => {\n      setIsLoading(false);\n      setError(error);\n    });\n  };\n\n  const renderChangePercent = percent => {\n    if (percent > 0) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"percent-raised\",\n        children: [percent, \"% \\u2191\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 18\n      }, this);\n    } else if (percent < 0) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"percent-fallen\",\n        children: [percent, \"% \\u2193\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 18\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: percent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 18\n      }, this);\n    }\n  };\n\n  const handleChangePagination = direction => {\n    let {\n      page\n    } = query(location.search);\n    page = direction === 'next' ? +page + 1 : +page - 1;\n    navigate({\n      pathname: '/',\n      search: `?page=${page}`\n    });\n  };\n\n  const sortCurrencies = (type, name) => {\n    if (!name) {\n      if (highToLow && !name) {\n        currencies.sort((a, b) => {\n          return a[type] - b[type];\n        });\n        setHighToLow(false);\n      } else {\n        currencies.sort((a, b) => {\n          return b[type] - a[type];\n        });\n        setHighToLow(true);\n      }\n    } else {\n      if (highToLow) {\n        currencies.sort((a, b) => {\n          return a[type].localeCompare(b[type]);\n        });\n        setHighToLow(false);\n      } else {\n        currencies.sort((a, b) => {\n          return b[type].localeCompare(a[type]);\n        });\n        setHighToLow(true);\n      }\n    }\n\n    const sortedCurrencies = [...currencies];\n    setCurrencies(sortedCurrencies);\n  };\n\n  const {\n    page\n  } = query(location.search);\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 20\n    }, this);\n  }\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 20\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      currencies: currencies,\n      renderChangePercent: renderChangePercent,\n      sortCurrencies: sortCurrencies\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      page: +page || 1,\n      totalPages: totalPages,\n      handleChangePagination: handleChangePagination\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 13\n  }, this);\n};\n\n_s(List, \"YyM7Ye+EX73VRMLx68a5t8WpetA=\", false, function () {\n  return [useLocation, useNavigate];\n});\n\n_c = List;\nexport default List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["C:/Users/David/Desktop/react/cryptocurrencies/cryptocurrencies/src/components/List/List.js"],"names":["React","useEffect","useState","API_URL","query","Loading","Pagination","Table","useLocation","useNavigate","List","props","isLoading","setIsLoading","currencies","setCurrencies","error","setError","highToLow","setHighToLow","location","navigate","totalPages","page","search","pathname","fetchCurrency","fetch","then","data","status","json","Error","catch","renderChangePercent","percent","handleChangePagination","direction","sortCurrencies","type","name","sort","a","b","localeCompare","sortedCurrencies"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { API_URL } from '../../configs'\r\nimport {query} from '../core/helpers/query'\r\nimport Loading from \"../common/Loading\";\r\nimport Pagination from \"./Pagination\";\r\nimport Table from \"./Table\";\r\nimport './Table.css'\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\n\r\nconst List = (props) => {\r\n\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [currencies, setCurrencies] = useState([]);\r\n    const [error, setError] = useState(null);\r\n    const [highToLow, setHighToLow] = useState(false);\r\n\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const totalPages = 5;\r\n\r\n    useEffect(() => {\r\n        const {page} = query(location.search);\r\n        if(!page){  \r\n            navigate({\r\n                pathname: '/',\r\n                search: `?page=1`,\r\n              })\r\n        }\r\n\r\n        fetchCurrency(page || 1);\r\n    },[location.search])\r\n\r\n    \r\n    const fetchCurrency = (page) => {\r\n\r\n        setIsLoading(true)\r\n\r\n        fetch(`${API_URL}&page=${page || 1}&per_page=20`)\r\n            .then(data => {\r\n                if (data.status === 200) {\r\n                    return data.json()\r\n                }\r\n                throw Error()\r\n            })\r\n            .then((currencies) => {\r\n                setIsLoading(false);\r\n                setCurrencies(currencies);\r\n            })\r\n            .catch((error) => {\r\n                setIsLoading(false);\r\n                setError(error);\r\n            })\r\n    }\r\n\r\n    const renderChangePercent = (percent) => {\r\n        if (percent > 0) {\r\n          return <span className=\"percent-raised\">{percent}% &uarr;</span>\r\n        } else if (percent < 0) {\r\n          return <span className=\"percent-fallen\">{percent}% &darr;</span>\r\n        } else {\r\n          return <span>{percent}</span>\r\n        }\r\n      }\r\n\r\n      const handleChangePagination = (direction)=>{\r\n        let {page} = query(location.search);\r\n        page = direction === 'next' ? +page + 1 : +page - 1\r\n        navigate({\r\n            pathname: '/',\r\n            search: `?page=${page}`,\r\n          })\r\n    }\r\n\r\n    const sortCurrencies = (type, name) => {\r\n\r\n        if(!name) {\r\n            if(highToLow && !name) {\r\n                currencies.sort((a ,b) => {\r\n                return a[type] - b[type];\r\n                })\r\n                setHighToLow(false);\r\n            }else {\r\n                currencies.sort((a ,b) => {\r\n                    return b[type] - a[type];\r\n                })\r\n                setHighToLow(true);\r\n            }\r\n        }else {\r\n            if(highToLow){\r\n            currencies.sort((a,b) => {\r\n                return a[type].localeCompare(b[type])\r\n            })\r\n            setHighToLow(false);\r\n        }else{\r\n            currencies.sort((a,b) => {\r\n                return b[type].localeCompare(a[type])\r\n            })\r\n            setHighToLow(true);\r\n        }\r\n        }\r\n    \r\n        const sortedCurrencies = [...currencies];\r\n\r\n        setCurrencies(sortedCurrencies);\r\n    }\r\n\r\n        const {page} = query(location.search);\r\n        \r\n        if (error) {\r\n            return <div>Error</div>\r\n        }\r\n        if (isLoading) {\r\n            return <div className=\"loading-container\">\r\n                <Loading />\r\n            </div>\r\n        }\r\n        return (\r\n            <div>\r\n            <Table currencies={currencies} renderChangePercent={renderChangePercent} sortCurrencies={sortCurrencies}/>\r\n            <Pagination\r\n            page={+page || 1}\r\n            totalPages={totalPages}\r\n            handleChangePagination={handleChangePagination}\r\n            />\r\n            </div>\r\n            )\r\n    }\r\nexport default List"]},"metadata":{},"sourceType":"module"}